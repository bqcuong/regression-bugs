<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-3.dtd">
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta th:substituteby="includes :: htmlhead"/>
	<title>Service Manager - Template</title>

	<style th:fragment="htmlhead">
		pre {
			font-size: 11px;
		}

		body {
			padding-bottom: 40px;
		}

		.dl-horizontal > dd:after {
			display: table;
			content: "";
			clear: both;
		}
	</style>
</head>

<body th:with="page='resources'">
<span th:substituteby="includes :: navbar"></span>

<div class="container">
	<h1>Template '<span th:text="${entity.id}"></span>'</h1>

	<dl>
		<dt>Name</dt>
		<dd th:text="${entity.id}"></dd>
		<dt>Revision Count</dt>
		<dd th:text="${entity.revisions}"></dd>
		<dt>Latest Revision</dt>
		<dd th:text="${entity.latestRevision}"></dd>
		<dt>Created</dt>
		<dd th:text="${currentUser.format(entity.created)}"></dd>
		<dt>Updated</dt>
		<dd th:text="${currentUser.format(entity.updated)}"></dd>
		<dt>Actions</dt>
		<dd>
			<ul>
				<li>
					<form method="POST" th:action="@{/resources/templates/new-instance}">
						<input type="hidden" name="id" th:value="${entity.id}" />
						<input type="hidden" name="nonce" th:value="${nonce}" />

						<input type="submit" class="btn" value="New Instance" />
					</form>
				</li>
			</ul>
		</dd>
	</dl>

	<h2>Instances</h2>
	<table class="table">
		<thead>
		<tr>
			<th>Id</th>
			<th>Provider Instance ID</th>
			<th>State</th>
			<th>Revision</th>
			<th>Created</th>
			<th>Updated</th>
			<th>Actions</th>
		</tr>
		</thead>
		<tbody>
		<tr th:each="inst: ${entity.instances}">
			<td th:text="${inst.id}"></td>
			<td th:text="${inst.providerInstanceId}"></td>
			<td th:text="${inst.state}"></td>
			<td th:text="${inst.revision}"></td>
			<td th:text="${currentUser.format(inst.created)}"></td>
			<td th:text="${currentUser.format(inst.updated)}"></td>
			<td>
				<form method="POST" th:action="@{/resources/resource-instances/discard}">
					<input type="hidden" name="id" th:value="${inst.id}" />
					<input type="hidden" name="nonce" th:value="${nonce}" />

					<input type="submit" class="btn" value="Discard" />
				</form>
			</td>
		</tr>
		</tbody>
	</table>

	<p th:substituteby="includes :: footer"/>
</div>

<p th:substituteby="includes :: htmlfoot"/>
</body>
</html>
